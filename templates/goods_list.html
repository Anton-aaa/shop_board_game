{% extends 'base.html' %}

{% block content %}
{%include "navbar.html"%}
<br><h1>Goods</h1></br>
{% for product in goods %}
<h2>{{product.name}}</h2>
{% if user.is_authenticated %}
    <br><a href="{% url 'goods_update' product.pk %}">Update article</a></br>
{% endif %}
<br><a>{{product.description}}</a></br>
<br><a>Price: {{product.price}}</a></br>
<br><a>Quantity: {{product.quantity}}</a></br>
<br></br>

{% if user.is_authenticated %}
    <br><a>Enter quantity to purchase</a></br>
    <br><form method="post" action="{% url 'create_purchase' product.pk %}">
        {% csrf_token %}
        {{ create_form }}
        <input type="submit" value="Buy">
    </form></br>
{% endif %}
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock %}